ScreenManager:
    LoginScreen:
    SignUpScreen:
    OTPScreen:
    FPassScreen:
    MainScreen:
    MenuScreen:
    ProfileScreen:
    MapScreen:
    FriendsScreen:
    AddFriends:
    DeleteFriends:
    ViewFriends:


<LoginScreen>:
    name: 'Login'
    MDCard:
        size_hint: 0.8, 0.7
        mode: 'fill'
        fill_color: 0.3, 0.3, 0.3, 1
        pos_hint: {'center_x':0.5, 'center_y':0.5}
        padding: 25
        spacing: 25
    MDLabel:
        text: "Login to SOS"
        halign: 'center'
        pos_hint: {'center_x':0.5, 'center_y':0.8}
        theme_text_color: 'Custom'
        text_color: (0.3, 0.3, 0.1, 0.95)
        font_style: 'H4'
    MDTextField:
        id : userName
        hint_text: "Username"
        required: 'True'
        mode: 'fill'
        fill_color: [0, 0, 0, 0.3]
        size_hint: 0.7, None
        height: "30dp"
        helper_text_mode: 'on_focus'
        pos_hint: {'center_x':0.5,'center_y':0.6}
    MDTextField:
        id : userPass
        hint_text: "Password"
        required: 'True'
        mode: 'fill'
        fill_color: [0, 0, 0, 0.3]
        size_hint: 0.7, None
        height: "30dp"
        helper_text_mode: 'on_focus'
        pos_hint: {'center_x':0.5,'center_y':0.4}
    MDRoundFlatButton:
        text: "Login"
        font_style:'H6'
        pos_hint:{'center_x':0.5,'center_y':0.2}
        on_press:
            t = root.login(userName.text, userPass.text)
            root.manager.transition.direction = 'left'
            root.manager.current = 'Main' if t == True else app.PopUp("Invalid User Name or Password!", "Try Forgot Password", 'Login')
    MDRoundFlatButton:
        text: "Sign Up"
        font_style:'H6'
        pos_hint:{'center_x':0.5,'center_y':0.05}
        on_press:
            root.manager.transition.direction = 'left'
            root.manager.current = 'SignUp'
    
    MDFlatButton:
        text: "Forgot Password??"
        font_style:'H6'
        pos_hint:{'center_x':0.8,'center_y':0.2}
        on_press:
            root.manager.transition.direction = 'left'
            root.manager.current = 'OTP'

<OTPScreen>:
    name: "OTP"
    MDRectangleFlatButton:
        text: "<-"
        valign: 'top'
        pos_hint: {'x':0, 'center_y':0.95}
        font_style: 'H6'
        on_press:
            root.manager.transition.direction = 'right'
            root.manager.current = 'Login'
    MDCard:
        size_hint: 0.8, 0.7
        mode: 'fill'
        fill_color: 0.5, 0.5, 0.5, 1
        pos_hint: {'center_x':0.5, 'center_y':0.5}
        padding: 25
        spacing: 25
    MDLabel:
        text: "Mobile Verification"
        halign: 'center'
        pos_hint: {'center_x':0.5, 'center_y':0.75}
        theme_text_color: 'Custom'
        text_color: (0.5, 0.5, 0.1, 0.95)
        font_style: 'H5'
    MDTextField:
        id : Fnumber
        hint_text: "Contact No."
        required: 'True'
        mode: 'fill'
        fill_color: 0, 0, 0, 0.3
        size_hint: 0.7, None
        height: "30dp"
        helper_text_mode: 'on_focus'
        pos_hint: {'center_x':0.5,'center_y':0.55}
    MDFillRoundFlatButton:
        text: "Send OTP"
        fill_color: 1, 1, 0, 0.8
        pos_hint:{'center_x':0.8,'center_y':0.55}
        on_press:root.sendOTP(Fnumber.text)
    MDTextField:
        id : otp
        hint_text: "OTP"
        required: 'True'
        mode: 'fill'
        fill_color: 0, 0, 0, 0.3
        size_hint: 0.7, None
        height: "30dp"
        helper_text_mode: 'on_focus'
        pos_hint: {'center_x':0.5,'center_y':0.45}
    MDFillRoundFlatButton:
        text: "Verify OTP"
        fill_color: 1, 1, 0, 0.8
        pos_hint: {'center_x':0.8,'center_y':0.45}
        on_press:
            t = root.verifyOTP(otp.text, Fnumber.text)
            root.manager.transition.direction = 'left'
            root.manager.current = 'FPass' if t else 'OTP'

<FPassScreen>:
    name:"FPass"
    MDRectangleFlatButton:
        text: "<-"
        valign: 'top'
        pos_hint: {'x':0, 'center_y':0.95}
        font_style: 'H6'
        on_press:
            root.manager.transition.direction = 'right'
            root.manager.current = 'Login'
    MDLabel:
        text: "Reset Password"
        halign: 'center'
        pos_hint: {'center_x':0.5, 'center_y':0.75}
        theme_text_color: 'Custom'
        text_color: (0.5, 0.5, 0.1, 0.95)
        font_style: 'H5'
    MDTextField:
        id : newPass
        hint_text: "New Password"
        required: 'True'
        mode: 'fill'
        fill_color: 0, 0, 0, 0.3
        size_hint: 0.7, None
        height: "30dp"
        helper_text_mode: 'on_focus'
        pos_hint: {'center_x':0.5,'center_y':0.55}
    MDTextField:
        id : newCPass
        hint_text: "Confirm Password"
        required: 'True'
        mode: 'fill'
        fill_color: 0, 0, 0, 0.3
        size_hint: 0.7, None
        height: "30dp"
        helper_text_mode: 'on_focus'
        pos_hint: {'center_x':0.5,'center_y':0.45}
    MDFillRoundFlatButton:
        text: "Set Password"
        fill_color: 1, 1, 0, 0.8
        pos_hint:{'center_x':0.5,'center_y':0.35}
        on_press:root.setPass(newPass.text, newCPass.text)

<SignUpScreen>:
    name: "SignUp"
    MDRectangleFlatButton:
        text: "<-"
        valign: 'top'
        pos_hint: {'x':0, 'center_y':0.95}
        font_style: 'H6'
        on_press:
            root.manager.transition.direction = 'right'
            root.manager.current = 'Login'
    MDCard:
        size_hint: 0.8, 0.7
        mode: 'fill'
        fill_color: 0.5, 0.5, 0.5, 1
        pos_hint: {'center_x':0.5, 'center_y':0.5}
        padding: 25
        spacing: 25
    MDLabel:
        text: "Welcome to SOS"
        halign: 'center'
        pos_hint: {'center_x':0.5, 'center_y':0.95}
        theme_text_color: 'Custom'
        text_color: (0.5, 0.5, 0.1, 0.95)
        font_style: 'H4'
    MDTextField:
        id : NUserName
        hint_text: "Username"
        required: 'True'
        mode: 'fill'
        fill_color: 0, 0, 0, 0.3
        size_hint: 0.7, None
        height: "30dp"
        helper_text_mode: 'on_focus'
        pos_hint: {'center_x':0.5,'center_y':0.85}
    MDTextField:
        id : NuserPass
        hint_text: "Password"
        required: 'True'
        mode: 'fill'
        fill_color: 0, 0, 0, 0.3
        size_hint: 0.7, None
        height: "30dp"
        helper_text_mode: 'on_focus'
        pos_hint: {'center_x':0.5,'center_y':0.7}
    MDTextField:
        id : NCuserPass
        hint_text: "Confirm Password"
        required: 'True'
        mode: 'fill'
        fill_color: 0, 0, 0, 0.3
        size_hint: 0.7, None
        height: "30dp"
        helper_text_mode: 'on_focus'
        pos_hint: {'center_x':0.5,'center_y':0.55}
    MDTextField:
        id : Nemail
        hint_text: "E-mail"
        required: 'True'
        mode: 'fill'
        fill_color: 0, 0, 0, 0.3
        size_hint: 0.7, None
        height: "30dp"
        helper_text_mode: 'on_focus'
        pos_hint: {'center_x':0.5,'center_y':0.4}
    MDTextField:
        id : Nnumber
        hint_text: "Contact No."
        required: 'True'
        mode: 'fill'
        fill_color: 0, 0, 0, 0.3
        size_hint: 0.7, None
        height: "30dp"
        helper_text_mode: 'on_focus'
        pos_hint: {'center_x':0.5,'center_y':0.25}
    MDRoundFlatButton:
        text: "Login"
        font_style:'H6'
        pos_hint:{'center_x':0.5,'center_y':0.05}
        on_press:
            t = root.SignUp(NUserName.text, NuserPass.text, NCuserPass.text, Nemail.text, Nnumber.text)
            root.manager.transition.direction = 'left'
            root.manager.current = 'Main' if t == True else 'SignUp'
    
<MainScreen>:
    name: "Main"
    MDFillRoundFlatButton:
        text: "SOS"
        font_style:'H2'
        pos_hint:{'center_x':0.5,'center_y':0.5}
        on_press: root.sendAlert()
    MDRoundFlatButton:
        text: "Menu"
        font_style:'H6'
        pos_hint:{'center_x':0.5,'center_y':0.1}
        on_press:
            root.manager.transition.direction = 'left'
            root.manager.current = 'Menu'

<MenuScreen>:
    name: 'Menu'
    MDLabel:
        text: "Menu"
        halign: 'center'
        pos_hint: {'center_x':0.5, 'center_y':0.80}
        theme_text_color: 'Custom'
        text_color: (0.3, 0.3, 0.1, 0.9)
        font_style: 'H3'
    MDRectangleFlatButton:
        text: "Profile"
        pos_hint: {'center_x':0.5, 'center_y':0.6}
        font_style: 'H6'
        on_press:
            root.manager.transition.direction = 'left'
            root.manager.current = 'Profile'
    MDRectangleFlatButton:
        text: "Friends"
        pos_hint: {'center_x':0.5, 'center_y':0.45}
        font_style: 'H6'
        on_press:
            root.manager.transition.direction = 'left'
            root.manager.current = 'Friends'
    MDRectangleFlatButton:
        text: "Map"
        pos_hint: {'center_x':0.5, 'center_y':0.3}
        font_style: 'H6'
        on_press:
            root.manager.transition.direction = 'left'
            root.manager.current = 'Map'
    MDRectangleFlatButton:
        text: "Back"
        pos_hint: {'center_x':0.5, 'center_y':0.15}
        font_style: 'H6'
        on_press:
            root.manager.transition.direction = 'right'
            root.manager.current = 'Main'

<FriendsScreen>:
    name:'Friends'
    MDLabel:
        text: " Friends"
        halign: 'center'
        pos_hint: {'center_x':0.5, 'center_y':0.80}
        theme_text_color: 'Custom'
        text_color: (0.3, 0.3, 0.1, 0.9)
        font_style: 'H3'
    MDRectangleFlatButton:
        text: "Add Friends"
        pos_hint: {'center_x':0.5, 'center_y':0.6}
        font_style: 'H6'
        on_press:
            root.manager.transition.direction = 'left'
            root.manager.current = 'AddFriends'
    MDRectangleFlatButton:
        text: "View Friends"
        pos_hint: {'center_x':0.5, 'center_y':0.45}
        font_style: 'H6'
        on_press:
            root.manager.transition.direction = 'left'
            root.manager.current = 'ViewFriends'
    MDRectangleFlatButton:
        text: "Delete Friends"
        pos_hint: {'center_x':0.5, 'center_y':0.3}
        font_style: 'H6'
        on_press:
            root.manager.transition.direction = 'left'
            root.manager.current = 'DeleteFriends'
    MDRectangleFlatButton:
        text: "Back"
        pos_hint: {'center_x':0.5, 'center_y':0.15}
        font_style: 'H6'
        on_press:
            root.manager.transition.direction = 'right'
            root.manager.current = 'Menu'
<AddFriends>:
    name: 'AddFriends'
    MDCard:
        size_hint: 0.8, 0.7
        mode: 'fill'
        fill_color: 0.3, 0.3, 0.3, 1
        pos_hint: {'center_x':0.5, 'center_y':0.5}
        padding: 25
        spacing: 25
    MDLabel:
        text: "Add your Friends"
        halign: 'center'
        pos_hint: {'center_x':0.5, 'center_y':0.8}
        theme_text_color: 'Custom'
        text_color: (0.3, 0.3, 0.1, 0.95)
        font_style: 'H4'
    MDTextField:
        id : name
        hint_text: "Enter name"
        required: 'True'
        mode: 'fill'
        fill_color: [0, 0, 0, 0.3]
        size_hint: 0.7, None
        height: "30dp"
        helper_text_mode: 'on_focus'
        pos_hint: {'center_x':0.5,'center_y':0.6}
    MDTextField:
        id : Nnumber
        hint_text: "Enter Contact Number"
        required: 'True'
        mode: 'fill'
        fill_color: [0, 0, 0, 0.3]
        size_hint: 0.7, None
        height: "30dp"
        helper_text_mode: 'on_focus'
        pos_hint: {'center_x':0.5,'center_y':0.4}
    MDRoundFlatButton:
        text: "Save"
        font_style:'H6'
        pos_hint:{'center_x':0.5,'center_y':0.2}
        on_press:
            t = root.add_friends(name.text, Nnumber.text)
            root.manager.transition.direction = 'right'
            root.manager.current = 'Friends'

<ViewFriends>:
    name:'ViewFriends'
    MDLabel:
        text: "View Friends" 
        halign: 'center'
        pos_hint: {'center_x':0.5, 'center_y':0.80}
        theme_text_color: 'Custom'
        text_color: (0.3, 0.3, 0.1, 0.9)
        font_style: 'H3'
    MDDataTable:
        pos_hint:{'center_x': 0.5, 'center_y': 0.5}
        size_hint:(0.9, 0.6)
        check:True
        rows_num:10,
        column_data:[
            ("No.", dp(18)),
            ("Food", dp(20)),
            ("Calories", dp(20))],
        row_data:[
            ("1", "Burger", "300"),
            ("2", "Oats", "200"),
            ("3", "Oats", "200"),
            ("4", "Oats", "200"),
            ("5", "Oats", "200"),
            ("6", "Oats", "200"),
            ("7", "Oats", "200"),
            ("8", "Oats", 
        ]
        )

<DeleteFriends>:
    name: 'DeleteFriends'
    MDCard:
        size_hint: 0.8, 0.7
        mode: 'fill'
        fill_color: 0.3, 0.3, 0.3, 1
        pos_hint: {'center_x':0.5, 'center_y':0.5}
        padding: 25
        spacing: 25
    MDLabel:
        text: "Delete Friends"
        halign: 'center'
        pos_hint: {'center_x':0.5, 'center_y':0.8}
        theme_text_color: 'Custom'
        text_color: (0.3, 0.3, 0.1, 0.95)
        font_style: 'H4'
    MDTextField:
        id : name
        hint_text: "Enter name you want to delete"
        required: 'True'
        mode: 'fill'
        fill_color: [0, 0, 0, 0.3]
        size_hint: 0.6, None
        height: "40dp"
        helper_text_mode: 'on_focus'
        pos_hint: {'center_x':0.5,'center_y':0.6}
    MDRoundFlatButton:
        text: "Delete"
        font_style:'H6'
        pos_hint:{'center_x':0.5,'center_y':0.4}
        on_press:
            t = root.delete_friends(name.text)
            root.manager.transition.direction = 'right'
            root.manager.current = 'Friends'
            
<ProfileScreen>:
    name: 'Profile'
    MDRectangleFlatButton:
        text: "<-"
        valign: 'top'
        pos_hint: {'x':0, 'center_y':0.95}
        font_style: 'H6'
        on_press:
            root.manager.transition.direction = 'right'
            root.manager.current = 'Menu'

<MapScreen>:
    name: 'Map'
    MDRectangleFlatButton:
        text: "<-"
        valign: 'top'
        pos_hint: {'x':0, 'center_y':0.95}
        font_style: 'H6'
        on_press:
            root.manager.transition.direction = 'right'
            root.manager.current = 'Menu'