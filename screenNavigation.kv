ScreenManager:
    LoginScreen:
    SignUpScreen:
    OTPScreen:
    FPassScreen:
    MainScreen:
    MenuScreen:
    ProfileScreen:
    FriendsScreen:
    MapScreen:


<LoginScreen>:
    name: 'Login'
    MDCard:
        size_hint: 0.8, 0.7
        mode: 'fill'
        fill_color: 0.3, 0.3, 0.3, 1
        pos_hint: {'center_x':0.5, 'center_y':0.5}
        padding: 25
        spacing: 25
    MDLabel:
        text: "Login to SOS"
        halign: 'center'
        pos_hint: {'center_x':0.5, 'center_y':0.8}
        theme_text_color: 'Custom'
        text_color: (0.3, 0.3, 0.1, 0.95)
        font_style: 'H4'
    MDTextField:
        id : userName
        hint_text: "Username"
        required: 'True'
        mode: 'fill'
        fill_color: [0, 0, 0, 0.3]
        size_hint: 0.7, None
        height: "30dp"
        helper_text_mode: 'on_focus'
        pos_hint: {'center_x':0.5,'center_y':0.6}
    MDTextField:
        id : userPass
        hint_text: "Password"
        required: 'True'
        mode: 'fill'
        fill_color: [0, 0, 0, 0.3]
        size_hint: 0.7, None
        height: "30dp"
        helper_text_mode: 'on_focus'
        pos_hint: {'center_x':0.5,'center_y':0.4}
    MDRoundFlatButton:
        text: "Login"
        font_style:'H6'
        pos_hint:{'center_x':0.5,'center_y':0.2}
        on_press:
            t = root.login(userName.text, userPass.text)
            root.manager.transition.direction = 'left'
            root.manager.current = 'Main' if t == True else app.PopUp("Invalid User Name or Password!", "Try Forgot Password", 'Login')
    MDRoundFlatButton:
        text: "Sign Up"
        font_style:'H6'
        pos_hint:{'center_x':0.5,'center_y':0.05}
        on_press:
            root.manager.transition.direction = 'left'
            root.manager.current = 'SignUp'
    
    MDFlatButton:
        text: "Forgot Password??"
        font_style:'H6'
        pos_hint:{'center_x':0.8,'center_y':0.2}
        on_press:
            root.manager.transition.direction = 'left'
            root.manager.current = 'OTP'

<OTPScreen>:
    name: "OTP"
    MDRectangleFlatButton:
        text: "<-"
        valign: 'top'
        pos_hint: {'x':0, 'center_y':0.95}
        font_style: 'H6'
        on_press:
            root.manager.transition.direction = 'right'
            root.manager.current = 'Login'
    MDCard:
        size_hint: 0.8, 0.7
        mode: 'fill'
        fill_color: 0.5, 0.5, 0.5, 1
        pos_hint: {'center_x':0.5, 'center_y':0.5}
        padding: 25
        spacing: 25
    MDLabel:
        text: "Mobile Verification"
        halign: 'center'
        pos_hint: {'center_x':0.5, 'center_y':0.75}
        theme_text_color: 'Custom'
        text_color: (0.5, 0.5, 0.1, 0.95)
        font_style: 'H5'
    MDTextField:
        id : Fnumber
        hint_text: "Contact No."
        required: 'True'
        mode: 'fill'
        fill_color: 0, 0, 0, 0.3
        size_hint: 0.7, None
        height: "30dp"
        helper_text_mode: 'on_focus'
        pos_hint: {'center_x':0.5,'center_y':0.55}
    MDFillRoundFlatButton:
        text: "Send OTP"
        fill_color: 1, 1, 0, 0.8
        pos_hint:{'center_x':0.8,'center_y':0.55}
        on_press:root.sendOTP(Fnumber.text)
    MDTextField:
        id : otp
        hint_text: "OTP"
        required: 'True'
        mode: 'fill'
        fill_color: 0, 0, 0, 0.3
        size_hint: 0.7, None
        height: "30dp"
        helper_text_mode: 'on_focus'
        pos_hint: {'center_x':0.5,'center_y':0.45}
    MDFillRoundFlatButton:
        text: "Verify OTP"
        fill_color: 1, 1, 0, 0.8
        pos_hint: {'center_x':0.8,'center_y':0.45}
        on_press:
            t = root.verifyOTP(otp.text)
            root.manager.transition.direction = 'left'
            root.manager.current = 'FPass' if t else 'OTP'


<FPassScreen>:
    name:"FPass"
    MDRectangleFlatButton:
        text: "<-"
        valign: 'top'
        pos_hint: {'x':0, 'center_y':0.95}
        font_style: 'H6'
        on_press:
            root.manager.transition.direction = 'right'
            root.manager.current = 'Login'

<SignUpScreen>:
    name: "SignUp"
    MDRectangleFlatButton:
        text: "<-"
        valign: 'top'
        pos_hint: {'x':0, 'center_y':0.95}
        font_style: 'H6'
        on_press:
            root.manager.transition.direction = 'right'
            root.manager.current = 'Login'
    MDCard:
        size_hint: 0.8, 0.7
        mode: 'fill'
        fill_color: 0.5, 0.5, 0.5, 1
        pos_hint: {'center_x':0.5, 'center_y':0.5}
        padding: 25
        spacing: 25
    MDLabel:
        text: "Welcome to SOS"
        halign: 'center'
        pos_hint: {'center_x':0.5, 'center_y':0.95}
        theme_text_color: 'Custom'
        text_color: (0.5, 0.5, 0.1, 0.95)
        font_style: 'H4'
    MDTextField:
        id : NUserName
        hint_text: "Username"
        required: 'True'
        mode: 'fill'
        fill_color: 0, 0, 0, 0.3
        size_hint: 0.7, None
        height: "30dp"
        helper_text_mode: 'on_focus'
        pos_hint: {'center_x':0.5,'center_y':0.85}
    MDTextField:
        id : NuserPass
        hint_text: "Password"
        required: 'True'
        mode: 'fill'
        fill_color: 0, 0, 0, 0.3
        size_hint: 0.7, None
        height: "30dp"
        helper_text_mode: 'on_focus'
        pos_hint: {'center_x':0.5,'center_y':0.7}
    MDTextField:
        id : NCuserPass
        hint_text: "Confirm Password"
        required: 'True'
        mode: 'fill'
        fill_color: 0, 0, 0, 0.3
        size_hint: 0.7, None
        height: "30dp"
        helper_text_mode: 'on_focus'
        pos_hint: {'center_x':0.5,'center_y':0.55}
    MDTextField:
        id : Nemail
        hint_text: "E-mail"
        required: 'True'
        mode: 'fill'
        fill_color: 0, 0, 0, 0.3
        size_hint: 0.7, None
        height: "30dp"
        helper_text_mode: 'on_focus'
        pos_hint: {'center_x':0.5,'center_y':0.4}
    MDTextField:
        id : Nnumber
        hint_text: "Contact No."
        required: 'True'
        mode: 'fill'
        fill_color: 0, 0, 0, 0.3
        size_hint: 0.7, None
        height: "30dp"
        helper_text_mode: 'on_focus'
        pos_hint: {'center_x':0.5,'center_y':0.25}
    MDRoundFlatButton:
        text: "Login"
        font_style:'H6'
        pos_hint:{'center_x':0.5,'center_y':0.05}
        on_press:
            t = root.SignUp(NUserName.text, NuserPass.text, NCuserPass.text, Nemail.text, Nnumber.text)
            root.manager.transition.direction = 'left'
            root.manager.current = 'Main' if t == True else 'SignUp'
    
<MainScreen>:
    name: "Main"
    MDFillRoundFlatButton:
        text: "SOS"
        font_style:'H2'
        pos_hint:{'center_x':0.5,'center_y':0.5}
    MDRoundFlatButton:
        text: "Menu"
        font_style:'H6'
        pos_hint:{'center_x':0.5,'center_y':0.1}
        on_press:
            root.manager.transition.direction = 'left'
            root.manager.current = 'Menu'

<MenuScreen>:
    name: 'Menu'
    MDLabel:
        text: "SOS"
        halign: 'center'
        pos_hint: {'center_x':0.5, 'center_y':0.95}
        theme_text_color: 'Custom'
        text_color: (0.3, 0.3, 0.1, 0.9)
        font_style: 'H3'
    MDRectangleFlatButton:
        text: "Profile"
        pos_hint: {'center_x':0.5, 'center_y':0.6}
        font_style: 'H6'
        on_press:
            root.manager.transition.direction = 'left'
            root.manager.current = 'Profile'
    MDRectangleFlatButton:
        text: "Friends"
        pos_hint: {'center_x':0.5, 'center_y':0.45}
        font_style: 'H6'
        on_press:
            root.manager.transition.direction = 'left'
            root.manager.current = 'Friends'
    MDRectangleFlatButton:
        text: "Map"
        pos_hint: {'center_x':0.5, 'center_y':0.3}
        font_style: 'H6'
        on_press:
            root.manager.transition.direction = 'left'
            root.manager.current = 'Map'
    MDRectangleFlatButton:
        text: "Back"
        pos_hint: {'center_x':0.5, 'center_y':0.15}
        font_style: 'H6'
        on_press:
            root.manager.transition.direction = 'right'
            root.manager.current = 'Main'
            
<ProfileScreen>:
    name: 'Profile'
    MDRectangleFlatButton:
        text: "<-"
        valign: 'top'
        pos_hint: {'x':0, 'center_y':0.95}
        font_style: 'H6'
        on_press:
            root.manager.transition.direction = 'right'
            root.manager.current = 'Menu'

<FriendsScreen>:
    name: 'Friends'
    MDRectangleFlatButton:
        text: "<-"
        valign: 'top'
        pos_hint: {'x':0, 'center_y':0.95}
        font_style: 'H6'
        on_press:
            root.manager.transition.direction = 'right'
            root.manager.current = 'Menu'

<MapScreen>:
    name: 'Map'
    MDRectangleFlatButton:
        text: "<-"
        valign: 'top'
        pos_hint: {'x':0, 'center_y':0.95}
        font_style: 'H6'
        on_press:
            root.manager.transition.direction = 'right'
            root.manager.current = 'Menu'